---
title: "p8105_hw2_raj2152"
author: "Rachelle Juan"
date: "10/9/2021"
output: github_document
---

```{r, echo = FALSE, message = FALSE}
library(tidyverse)
library(readxl)
library(haven)
```

# Problem 1

Importing and cleaning the Mr. Trash Wheel sheet.
```{r}
trashwheel_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = "A2:N408"
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(across(sports_balls, round, 0))
```

Read and clean precipitation data for 2018 and 2019. 
```{r}
precip18_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    range = "A2:B14"
  ) %>% 
  janitor::clean_names() %>% 
  rename(total_precipitation = total) %>% 
  mutate(year = "2018") %>% 
  drop_na(total_precipitation)  
  

precip19_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2019 Precipitation",
    range = "A2:B14"
  ) %>% 
  janitor::clean_names() %>% 
  rename(total_precipitation = total) %>% 
  mutate(year = "2019") %>% 
  drop_na(total_precipitation) 
```

Merge 2018 and 2019 precipitation datasets.
```{r}
precip_tidy =
  bind_rows(precip18_df, precip19_df) %>% 
  janitor::clean_names() %>% 
  mutate(month = month.name[month])

precip_tidy
```

About these data...
```{r, results = FALSE}
skimr::skim(trashwheel_df)
trash19_df = filter(trashwheel_df, year == "2019")
median(pull(trash19_df, sports_balls))

skimr::skim(precip18_df)
skimr::skim(precip19_df)
skimr::skim(precip_tidy)
sum(pull(precip18_df, total_precipitation))
```

### About Mr. Trash Wheel
There were 344 observations and 14 variables in the Mr. Trash Wheel dataset. The variables identified the date of operation for specific dumpsters and measured the total weight and volume of trash collected. There are also separate variables indicating the count of item types collected -- for example, plastic and glass bottles, grocery bags, cigarette butts, etc. The variable 'homes powered' also provided a count of homes powered by the trash from Mr. Trash Wheel. The median number of sports balls in a dumpster in 2019 was 8.5 sports balls. 

### About 2018 & 2019 Precipitation Data
The total precipitation for 2018 was 70.33 inches. 2018 had 12 observations and 2019 had 6 observations. In 2018, the average precipitation was 5.86 inches. In 2019, the average precipitation was 2.78 inches. The key variables were month and total precipitation in inches. The resulting merged dataset, thus, shows 18 total observations for total precipitation in inches with a monthly average precipitation total of 4.83 inches. 


## Problem 2

First, clean pols_month.csv data:
```{r, message = FALSE}
pols_month_df = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year","month","day"), sep = "-") %>% 
  mutate(
    month = as.numeric(month),
    month = month.name[month],
    prez_gop = replace(prez_gop, prez_gop == "1", "gop"),
    prez_gop = replace(prez_gop, prez_gop == "0", "dem"),
    ) %>% 
  rename(president = prez_gop) %>% 
  select(-prez_dem, -day)
```

Second, clean snp.csv data:
```{r, message = FALSE}
snp_df =
  read_csv("./fivethirtyeight_datasets/snp.csv") %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month","day","year"), sep = "/") %>% 
  mutate(month = as.numeric(month)) %>% 
  arrange(year, month) %>% 
  mutate(month = month.name[month]) %>% 
  select(-day) %>% 
  relocate(year, month)
```

